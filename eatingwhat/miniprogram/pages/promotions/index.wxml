<view class="container" style="padding-top: {{navBarHeight}}px;">
  <!-- 自定义导航栏 -->
  <view class="custom-navbar" style="height: {{navBarHeight}}px; padding-top: {{statusBarHeight}}px;">
    <view class="nav-left" bindtap="onBack">
      <view class="back-icon"></view>
    </view>
    <view class="nav-title">更多优惠</view>
  </view>

  <!-- 顶部 Tab -->
  <view class="tabs" style="top: {{navBarHeight}}px;">
    <view class="tab-item {{currentTab === 'recommend' ? 'active' : ''}}" bindtap="onTabChange" data-tab="recommend">
      <text>周边好券</text>
      <view class="tab-line" wx:if="{{currentTab === 'recommend'}}"></view>
    </view>
    <view class="tab-item {{currentTab === 'other' ? 'active' : ''}}" bindtap="onTabChange" data-tab="other">
      <text>全网特惠</text>
      <view class="tab-line" wx:if="{{currentTab === 'other'}}"></view>
    </view>
  </view>

  <!-- 加载中 -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-spinner"></view>
    <text>正在加载优惠信息...</text>
  </view>

  <!-- 列表内容 -->
  <scroll-view scroll-y class="content-scroll" wx:else>
    <!-- 列表为空 -->
    <view wx:if="{{currentList.length === 0}}" class="empty-state">
      <image src="/images/empty.png" mode="aspectFit" class="empty-img"></image>
      <text>暂无相关优惠活动</text>
    </view>

    <!-- 优惠列表 -->
    <view class="promotion-list">
      <block wx:for="{{currentList}}" wx:key="id">
        <view class="promo-card" bindtap="onItemClick" data-item="{{item}}">
          <!-- 图片区域 -->
          <view class="img-container">
            <image class="promo-img" src="{{item.image_url}}" mode="widthFix" lazy-load></image>
            <!-- 折扣标签悬浮在图片上 -->
            <view class="discount-badge" wx:if="{{item.discountPercent}}">省{{item.discountPercent}}%</view>
          </view>
          
          <!-- 内容区域 -->
          <view class="promo-info">
            <view class="promo-header">
              <text class="tag type-tag">{{item.tag === 'recommend' ? '周边' : '精选'}}</text>
              <text class="promo-title">{{item.title}}</text>
            </view>
            
            <view class="promo-footer">
              <view class="price-row" wx:if="{{item.hasPrice}}">
                <text class="currency">¥</text>
                <text class="current-price">{{item.price}}</text>
                <text class="original-price" wx:if="{{item.originalPrice}}">¥{{item.originalPrice}}</text>
              </view>
              <text class="sales-text" wx:if="{{item.sales}}">已售 {{item.sales}}</text>
            </view>
          </view>
        </view>
      </block>
    </view>
    
    <view class="footer-tip">
      <text>到底啦 ~</text>
    </view>
  </scroll-view>
</view>
